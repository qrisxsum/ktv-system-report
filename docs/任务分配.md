# KTV å¤šé—¨åº—æŠ¥è¡¨è‡ªåŠ¨åŒ–ç³»ç»Ÿ - ä»»åŠ¡åˆ†é…ä¸åä½œæŒ‡å— (v2.3 Revised)

## ä¸€ã€ ç°çŠ¶è¯„ä¼°ä¸è°ƒæ•´ç­–ç•¥

**ç°çŠ¶åˆ†æ**:
*   **å‰ç«¯ (Frontend)**: è¿›åº¦è¾ƒå¿«ã€‚é¡¹ç›®éª¨æ¶å·²æ­å»ºï¼Œæ ¸å¿ƒé¡µé¢ï¼ˆ`Upload.vue`, Layoutï¼‰å·²å®Œæˆ UI åŸå‹å’Œäº¤äº’ Mockï¼Œé¢†å…ˆäºåç«¯ã€‚
*   **åç«¯ (Backend)**: åˆšåˆå§‹åŒ– (`main.py`)ï¼Œç¼ºå°‘æ ¸å¿ƒæ¶æ„ã€æ•°æ®åº“æ¨¡å‹å’Œä¸šåŠ¡é€»è¾‘ã€‚
*   **ä¸å¹³è¡¡ç‚¹**: åç«¯ (Dev A) å’Œ æ•°æ®å¤„ç† (Dev B) ä»»åŠ¡ç¹é‡ï¼Œä»é›¶å¼€å§‹ï¼›å‰ç«¯ (Dev C) ç›¸å¯¹è½»æ¾ã€‚

**è°ƒæ•´ç­–ç•¥**:
*   **Dev C è½¬å‹å…¨æ ˆ**: åˆ©ç”¨ Dev C å¯¹å‰ç«¯æ•°æ®ç»“æ„çš„éœ€æ±‚è®¤çŸ¥ï¼Œå°† **API å®šä¹‰ (Schemas)** å’Œ **API è·¯ç”±å±‚ (Controller)** çš„å·¥ä½œåˆ’æ‹¨ç»™ Dev Cã€‚
*   **Dev A èšç„¦åº•å±‚**: ä¸“æ³¨äºæ•°æ®åº“è®¾è®¡ã€æ ¸å¿ƒé…ç½®ã€é‰´æƒå’ŒåŸºç¡€è®¾æ–½ã€‚**æ–°å¢: è´Ÿè´£ Importer (å…¥åº“) é€»è¾‘**ï¼Œå› ä¸ºè¿™æ¶‰åŠäº‹åŠ¡å’Œæ•°æ®åº“åº•å±‚æ“ä½œã€‚
*   **Dev B èšç„¦é€»è¾‘**: ä¸“æ³¨äºæœ€çº¯ç²¹çš„æ•°æ®æ¸…æ´—ä¸è½¬æ¢ï¼ˆE & Tï¼‰ï¼Œä¸å†è´Ÿè´£å…·ä½“çš„å…¥åº“æ“ä½œï¼ˆLï¼‰ã€‚

---

## äºŒã€ å›¢é˜Ÿè§’è‰²ä¸èŒè´£ (è°ƒæ•´å)

| è§’è‰²ä»£å· | è§’è‰²åç§° | æ ¸å¿ƒèŒè´£ | å…³æ³¨ç‚¹ |   ï¼ˆå…ˆå®Œæˆçš„åç»­å¯ä»¥å¸®åŠ©ä»»åŠ¡å¤šçš„ä¸€å—å¼€å‘ï¼‰
| :--- | :--- | :--- | :--- |
| **Dev A** | **å¹³å°ä¸æ¶æ„** (Platform Lead) | æ•°æ®åº“æ¨¡å‹ã€åŸºç¡€è®¾æ–½ã€**äº‹åŠ¡çº§å…¥åº“æœåŠ¡**ã€**æ ¸å¿ƒèšåˆæŸ¥è¯¢**ã€éƒ¨ç½² | **æ•°æ®å®Œæ•´æ€§ã€æŸ¥è¯¢æ€§èƒ½ã€ç³»ç»Ÿåº•å±‚** |
| **Dev B** | **ETL æ•°æ®å¼•æ“** (Data Specialist) | Excel è§£æ (Parser)ã€å¤æ‚æ•°æ®æ¸…æ´— (Cleaner)ã€å­—æ®µæ˜ å°„ã€ä¸šåŠ¡è§„åˆ™æ ¡éªŒ | **æ•°æ®è½¬æ¢å‡†ç¡®æ€§ã€Excel å…¼å®¹æ€§** |
| **Dev C** | **å…¨æ ˆåº”ç”¨å¼€å‘** (Fullstack Lead) | **Pydantic Schemas å®šä¹‰**ã€**FastAPI è·¯ç”±**ã€**ä¸šåŠ¡æŒ‡æ ‡è®¡ç®—**ã€å‰ç«¯å¼€å‘ | **API æ˜“ç”¨æ€§ã€ç”¨æˆ·ä½“éªŒã€ç«¯åˆ°ç«¯åŠŸèƒ½** |

---

## ä¸‰ã€ è¯¦ç»†ä»»åŠ¡åˆ†é… (æŒ‰å‘¨/æ¨¡å—)

### 3.1 ç¬¬ä¸€é˜¶æ®µï¼šæ‰“é€šå…¨æ ˆé“¾è·¯ (Week 1)

**ç›®æ ‡**ï¼šå®Œæˆæ•°æ®åº“æ­å»ºï¼ŒAPI æ¥å£è·‘é€šï¼ŒETL åŸºç¡€é€»è¾‘å°±ä½ã€‚

#### ğŸ§‘â€ğŸ’» Dev A (å¹³å°åº•å±‚)
*   **A1. æ ¸å¿ƒç¯å¢ƒ**: å®Œå–„ `backend/core/`ï¼Œé…ç½® `config.py` (Envè¯»å–), `database.py` (SQLAlchemy å¼‚æ­¥/åŒæ­¥ Session).
    *   *å‚è€ƒæ–‡æ¡£*: `docs/å¼€å‘æ¡†æ¶æŒ‡å—0.md` (5.2 èŠ‚)
*   **A2. æ•°æ®åº“å»ºæ¨¡**: ç¼–å†™ `backend/models/`ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/å…¥åº“æ¨¡å‹3.md` (å®Œæ•´ç»“æ„)
    *   `base.py`: åŸºç±»å®šä¹‰ã€‚
    *   `meta.py`: `MetaFileBatch` (æ‰¹æ¬¡è¡¨)ã€‚
    *   `dims.py`: `DimStore`, `DimEmployee`, `DimProduct`, `DimRoom`ã€‚
    *   `facts.py`: `FactBooking`, `FactSales` (é‡ç‚¹è®¾è®¡ JSON æ‰©å±•å­—æ®µ)ã€‚
*   **A3. è¿ç§»ç³»ç»Ÿ**: åˆå§‹åŒ– Alembicï¼Œç”Ÿæˆ Initial Migration å¹¶éªŒè¯æ•°æ®åº“å»ºè¡¨æˆåŠŸã€‚
*   **A4. åŸºç¡€å…¥åº“æœåŠ¡**: ç¼–å†™ `services/importer.py` çš„éª¨æ¶ï¼Œå®šä¹‰ `save_batch` æ–¹æ³•ï¼Œå¤„ç† `session.commit` å’Œ `rollback`ã€‚

#### ğŸ§‘â€ğŸ’» Dev B (æ•°æ®å†…æ ¸)
*   **B1. Parser æœåŠ¡**: å®ç° `services/parser.py`ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/è§£æä¸æ¸…æ´—2.md` (æ­¥éª¤ 1-2)
    *   å¼€å‘ `read_excel_file`: å¤„ç†å¤šçº§è¡¨å¤´ (Multi-header) çš„ Flatten é€»è¾‘ï¼Œè¾“å‡ºæ ‡å‡† DataFrameã€‚
*   **B2. Cleaner æœåŠ¡**: å®ç° `services/cleaner.py`ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/è§£æä¸æ¸…æ´—2.md` (æ­¥éª¤ 3), `docs/å­—æ®µæ˜ å°„1.md`
    *   å¼€å‘ `clean_sales_data`: åŒ…å«åŠ¨æ€åˆ—è¯†åˆ«é€»è¾‘ï¼Œå°†æœªå®šä¹‰çš„æ”¯ä»˜æ–¹å¼åˆ— Pack è¿› `extra_info` JSONã€‚
    *   å¼€å‘ `clean_booking_data`: å¤„ç†é¢„è®¢æ•°æ®çš„æ¸…æ´—ã€‚
    *   **äº§å‡ºç‰©**: æ¸…æ´—å¹²å‡€çš„ `List[Dict]` æˆ– DataFrameï¼Œæ— éœ€å…³å¿ƒå¦‚ä½•å…¥åº“ã€‚

#### ğŸ§‘â€ğŸ’» Dev C (å…¨æ ˆåº”ç”¨)
*   **C1. API æ•°æ®å¥‘çº¦**: ç¼–å†™ `backend/schemas/` (Pydantic)ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/webç•Œé¢5.md` (1.2/1.3 èŠ‚)
    *   æ ¹æ®å‰ç«¯ `Upload.vue` çš„ Mock æ•°æ®ï¼Œå®šä¹‰ `UploadResponse`, `ValidationResult`, `BatchStatus` ç­‰ Schemaã€‚
    *   å®šä¹‰å‰ç«¯éœ€è¦çš„æŸ¥è¯¢å‚æ•° Schema (`QueryFilters`).
*   **C2. API è·¯ç”±å±‚**: ç¼–å†™ `backend/api/`ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/webç•Œé¢5.md` (ç¬¬ä¸€ç« )
    *   `api/v1/upload.py`: ç¼–å†™ä¸Šä¼ æ¥å£ï¼Œæ¥æ”¶æ–‡ä»¶ï¼Œ**ä¾æ¬¡è°ƒç”¨ B(Parser) -> B(Cleaner) -> A(Importer)**ï¼Œè¿”å› Schemaã€‚
    *   `api/v1/stats.py`: å®šä¹‰æŸ¥è¯¢æ¥å£çš„è¯·æ±‚/å“åº”ç»“æ„ (æš‚è¿”å› Mock æ•°æ®æˆ–ç©ºæ•°æ®)ã€‚
*   **C3. å‰ç«¯å¯¹æ¥**: ä¿®æ”¹ `frontend/src/api`ï¼Œå°† Mock æ•°æ®æ›¿æ¢ä¸ºçœŸå® API è°ƒç”¨ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/webç•Œé¢5.md` (2.2 èŠ‚)

---

### 3.2 ç¬¬äºŒé˜¶æ®µï¼šä¸šåŠ¡é€»è¾‘å®Œå–„ (Week 2)

**ç›®æ ‡**ï¼šå¡«è¡¥ä¸šåŠ¡é€»è¾‘ç©ºç¼ºï¼Œå®ç°çœŸå®æ•°æ®å…¥åº“å’ŒæŸ¥è¯¢ã€‚

#### ğŸ§‘â€ğŸ’» Dev A (å®‰å…¨ä¸æŸ¥è¯¢æ ¸å¿ƒ)
*   **A5. å®Œå–„å…¥åº“é€»è¾‘**: åœ¨ `services/importer.py` ä¸­å®ç°å®Œæ•´çš„â€œè¦†ç›–å†™å…¥â€é€»è¾‘ï¼š
    *   *å‚è€ƒæ–‡æ¡£*: `docs/å…¥åº“æ¨¡å‹3.md` (3.1 èŠ‚ - æ‰¹æ¬¡çŠ¶æ€ç®¡ç†)
    *   æ¥æ”¶ B çš„æ•°æ® -> åˆ é™¤æ—§ Batch æ•°æ® -> Bulk Insert æ–°æ•°æ® -> æ›´æ–° Batch çŠ¶æ€ã€‚
*   **A6. é‰´æƒæ¨¡å—**: å®ç° `core/security.py` (Hash, Token/Session) å’Œ `api/auth.py`ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/webç•Œé¢5.md` (1.1 èŠ‚)
*   **A7. ç»Ÿè®¡èšåˆæœåŠ¡**: å®ç° `services/stats.py`ï¼Œæ ¸å¿ƒè´Ÿè´£ **SQL èšåˆæŸ¥è¯¢**ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/èšåˆ4.md` (ç¬¬äºŒç«  - SQL æ¨¡æ¿)
    *   æä¾›é€šç”¨æ–¹æ³• `get_aggregated_stats(metrics, group_by, filters)`ã€‚
    *   è´Ÿè´£å¤„ç†åº•å±‚ SQL æ‹¼æ¥ (SQLAlchemy Select)ï¼Œç¡®ä¿æŸ¥è¯¢æ€§èƒ½ã€‚

#### ğŸ§‘â€ğŸ’» Dev B (ETL å¢å¼º)
*   **B3. æ ¡éªŒé€»è¾‘**: å®Œå–„ `Cleaner` ä¸­çš„æ•°æ®å¹³è¡¡æ€§æ ¡éªŒ (å¦‚ï¼šæ€»é‡‘é¢ check)ï¼Œå¹¶è¿”å›æ ¡éªŒæŠ¥å‘Šç»™ APIã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/è§£æä¸æ¸…æ´—2.md` (æ­¥éª¤ 4)
*   **B4. æ ¼å¼é€‚é…**: å¢å¼º `Parser` ä»¥é€‚é…æ›´å¤šé—¨åº—ä¸è§„èŒƒçš„ Excel æ ¼å¼ï¼ˆå¦‚è¡¨å¤´åœ¨ç¬¬3è¡Œã€æœ‰åˆå¹¶å•å…ƒæ ¼ç­‰ï¼‰ã€‚

#### ğŸ§‘â€ğŸ’» Dev C (å¯è§†åŒ–ä¸äº¤äº’)
*   **C4. æ‰¹æ¬¡ç®¡ç†å‰ç«¯**: å¼€å‘æ‰¹æ¬¡åˆ—è¡¨é¡µï¼Œå¯¹æ¥ `DELETE /api/v1/batch/{id}` æ¥å£ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/webç•Œé¢5.md` (2.2.4 èŠ‚)
*   **C5. å›¾è¡¨ç»„ä»¶**: åŸºäº ECharts å°è£…é€šç”¨å›¾è¡¨ç»„ä»¶ (`BarChart`, `LineChart`)ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/webç•Œé¢5.md` (2.2.1 èŠ‚)
*   **C6. æŠ¥è¡¨æ¥å£ç»„è£…**: åœ¨ `api/v1/dashboard.py` ä¸­å®ç° **ä¸šåŠ¡æ•°æ®ç»„è£…**ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/èšåˆ4.md` (1.1 èŠ‚ - å£å¾„å®šä¹‰), `docs/webç•Œé¢5.md` (1.3 èŠ‚)
    *   è°ƒç”¨ A çš„ `StatsService` è·å–åŸºç¡€æ•°æ®ã€‚
    *   åœ¨ Python å±‚è®¡ç®—è¡ç”ŸæŒ‡æ ‡ï¼ˆå¦‚ç¯æ¯”å¢é•¿ã€æ¯›åˆ©ç‡ï¼‰ã€‚
    *   å°†æ•°æ®è½¬æ¢ä¸ºå‰ç«¯ ECharts éœ€è¦çš„ç»“æ„ã€‚

---

### 3.3 ç¬¬ä¸‰é˜¶æ®µï¼šäº¤ä»˜ä¸ä¼˜åŒ– (Week 3)

**ç›®æ ‡**ï¼šç³»ç»Ÿå¥å£®æ€§ã€æ€§èƒ½ä¼˜åŒ–ã€æ–‡æ¡£äº¤ä»˜ã€‚

#### ğŸ§‘â€ğŸ’» Dev A (è¿ç»´ä¸ä¼˜åŒ–)
*   **A8. ç´¢å¼•ä¼˜åŒ–**: åˆ†ææ…¢æŸ¥è¯¢ï¼Œç»™ `fact_sales` ç­‰å¤§è¡¨æ·»åŠ å¤åˆç´¢å¼•ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/å…¥åº“æ¨¡å‹3.md` (ç´¢å¼•å®šä¹‰)
*   **A9. éƒ¨ç½²é…ç½®**: ç¼–å†™ç”Ÿäº§ç¯å¢ƒ `docker-compose.prod.yml`ï¼Œé…ç½® Nginx åå‘ä»£ç†å’Œé™æ€æ–‡ä»¶æ‰˜ç®¡ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/å¼€å‘æ¡†æ¶æŒ‡å—0.md` (ç¬¬å…«ç« )
*   **A10. ç”¨æˆ·æ–‡æ¡£**: ç¼–å†™ã€Šç³»ç»Ÿéƒ¨ç½²æ‰‹å†Œã€‹å’Œã€Šæ•°æ®åº“å­—å…¸ã€‹ã€‚

#### ğŸ§‘â€ğŸ’» Dev B (é²æ£’æ€§)
*   **B5. å¼‚å¸¸å¤„ç†**: å¢å¼º ETL çš„å®¹é”™æ€§ï¼Œå¤„ç† Excel æ ¼å¼çªå˜çš„æƒ…å†µï¼Œè®°å½•è¯¦ç»† Error Log åˆ°æ•°æ®åº“ã€‚
*   **B6. æ€§èƒ½è°ƒä¼˜**: ä¼˜åŒ– Pandas å¤„ç†å¤§æ–‡ä»¶æ—¶çš„å†…å­˜å ç”¨ (Chunking)ã€‚

#### ğŸ§‘â€ğŸ’» Dev C (ä½“éªŒæ‰“ç£¨)
*   **C7. å¯¼å‡ºåŠŸèƒ½**: åœ¨åç«¯å®ç° `StreamingResponse` å¯¼å‡º CSVï¼Œå‰ç«¯æ·»åŠ å¯¼å‡ºæŒ‰é’®ã€‚
    *   *å‚è€ƒæ–‡æ¡£*: `docs/webç•Œé¢5.md` (1.3 èŠ‚)
*   **C8. UI ç»†èŠ‚**: å¢åŠ å…¨å±€ Loading æ¡ï¼Œä¼˜åŒ– 404/500 é”™è¯¯é¡µï¼Œé€‚é…ç§»åŠ¨ç«¯æ˜¾ç¤ºã€‚

---

## å››ã€ åä½œæ–°çº¦å®š

ç”±äº Dev A æ‰¿æ‹…äº†å…¥åº“èŒè´£ï¼Œåä½œæ–¹å¼å¾®è°ƒï¼š

1.  **ETL æµæ°´çº¿**:
    *   **Pipeline**: `Raw File` -> **Dev B (Parser)** -> `DataFrame` -> **Dev B (Cleaner)** -> `Cleaned Dicts` -> **Dev A (Importer)** -> `Database`
    *   Dev C åœ¨ API å±‚è´Ÿè´£ä¸²è”è¿™ä¸‰ä¸ªæ­¥éª¤ã€‚

2.  **Schema First (C ä¸»å¯¼)**:
    *   Dev C è´Ÿè´£å®šä¹‰ "å‰ç«¯éœ€è¦ä»€ä¹ˆæ•°æ®" (`schemas/*.py`)ã€‚
    *   Dev A è´Ÿè´£ "æ•°æ®åº“æ€ä¹ˆå­˜æ•°æ®" (`models/*.py`)ã€‚
    *   Dev B è´Ÿè´£ "æ€ä¹ˆæŠŠ Excel å˜æˆ Cleaned Dicts"ã€‚

3.  **Git åˆ†æ”¯ç­–ç•¥**:
    *   `feature/frontend`: Dev C (å‰ç«¯éƒ¨åˆ†)
    *   `feature/backend-api`: Dev C (åç«¯ API éƒ¨åˆ†)
    *   `feature/backend-core`: Dev A (å« Importer)
    *   `feature/etl-engine`: Dev B (å« Parser/Cleaner)
    *   **æ¯æ—¥åˆå¹¶**: æ¯å¤©ä¸‹ç­å‰åˆå¹¶è‡³ `dev` åˆ†æ”¯ï¼Œç¡®ä¿æ¥å£ä¸å†²çªã€‚

---

## äº”ã€ æ ¸å¿ƒæ•°æ®æ¥å£çº¦å®š (Interface Contracts)

ä¸ºç¡®ä¿ä¸‰äººå¹¶è¡Œå¼€å‘æ—¶ä¸å› æ ¼å¼é—®é¢˜è¿”å·¥ï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆä»¥ä¸‹æ•°æ®å¥‘çº¦ã€‚

### 5.1 æ¸…æ´—å±‚äº¤ä»˜æ ‡å‡† (Dev B -> Dev A)
*   **åœºæ™¯**: Dev B æ¸…æ´—å®Œæ¯•åï¼Œè°ƒç”¨ Dev A çš„ `Importer.save_batch`ã€‚
*   **æ•°æ®ç±»å‹**: `List[Dict[str, Any]]` (ä¸¥ç¦ä¼ é€’ DataFrame æˆ– JSON String)ã€‚
*   **JSON å­—æ®µå¤„ç†**:
    *   `extra_info` (åŠ¨æ€åˆ—) å’Œ `extra_payments` (æ”¯ä»˜æ–¹å¼) å¿…é¡»ä¿ç•™ä¸º **Python Dictionary**ã€‚
    *   **é”™è¯¯ç¤ºä¾‹**: `{"extra": "{\"wechat\": 100}"}` (ä¸è¦è‡ªå·±åºåˆ—åŒ–!)
    *   **æ­£ç¡®ç¤ºä¾‹**: `{"extra": {"wechat": 100}}` (äº¤ç»™ SQLAlchemy å¤„ç†åºåˆ—åŒ–)
*   **ç©ºå€¼å¤„ç†**:
    *   æ•°å€¼å‹å­—æ®µ (Amount/Qty): å¿…é¡»å¡«å……ä¸º `0` æˆ– `0.0`ï¼Œä¸¥ç¦ `None` / `NaN`ã€‚
    *   å­—ç¬¦ä¸²å­—æ®µ: å…è®¸ `None` æˆ–ç©ºå­—ç¬¦ä¸²ã€‚

### 5.2 æ ¡éªŒåé¦ˆæ ¼å¼ (Dev B -> Dev C)
*   **åœºæ™¯**: æ–‡ä»¶ä¸Šä¼ åï¼Œå‰ç«¯å±•ç¤ºçš„æ ¡éªŒç»“æœè¯¦æƒ…ã€‚
*   **ç»“æ„å®šä¹‰ (Schema)**:
    ```python
    class ValidationResult(BaseModel):
        is_valid: bool
        summary: Dict[str, int]  # {"total_rows": 100, "error_rows": 5}
        errors: List[RowError]   # é”™è¯¯è¯¦æƒ…åˆ—è¡¨

    class RowError(BaseModel):
        row_index: int           # åŸå§‹ Excel è¡Œå· (ä» 1 å¼€å§‹)
        column: str              # å‡ºé”™åˆ—å (å¦‚ "å®æ”¶é‡‘é¢")
        message: str             # é”™è¯¯ä¿¡æ¯ (å¦‚ "é‡‘é¢ä¸å¹³è¡¡: åº”æ”¶(100) != å®æ”¶(90) + ä¼˜æƒ (0)")
        raw_data: Dict           # è¯¥è¡Œçš„åŸå§‹æ•°æ®å¿«ç…§ (ç”¨äºå‰ç«¯å±•ç¤º)
    ```

### 5.3 èšåˆæŸ¥è¯¢å‚æ•° (Dev C -> Dev A)
*   **åœºæ™¯**: Dev C åœ¨ API å±‚æ¥æ”¶å‰ç«¯è¯·æ±‚ï¼Œè°ƒç”¨ Dev A çš„ `StatsService`ã€‚
*   **æšä¸¾çº¦æŸ**: ä¸¥ç¦ä½¿ç”¨è£¸å­—ç¬¦ä¸²ä¼ é€’å…³é”®å‚æ•°ï¼Œå¿…é¡»ä½¿ç”¨ Shared Enumsã€‚
    ```python
    # common/enums.py
    class TimeGranularity(StrEnum):
        DAY = "day"
        WEEK = "week"
        MONTH = "month"

    class Dimension(StrEnum):
        STORE = "store"
        EMPLOYEE = "employee"
        ROOM = "room"
    ```
*   **å‡½æ•°ç­¾å**:
    `def query_stats(granularity: TimeGranularity, dimension: Dimension, ...)`
